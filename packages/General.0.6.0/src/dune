; @todo Generate cppo dependencies to #included file instead of listing them manually. Handle recursive inclusions

(rule
  (targets General.mli)
  (deps (:src General.cppo.mli)
    Reset/CommonHeader.ml Reset/SignatureHeader.ml Reset/ResetPervasives.ml Reset/ResetStandardLibrary.ml Reset/Footer.ml Traits/Representable.signatures.ml Traits/Displayable.signatures.ml Traits/Parsable.signatures.ml Traits/Equatable.signatures.Basic.ml Traits/Equatable.signatures.Operators.ml Traits/Equatable.signatures.ml Traits/Comparable.signatures.Basic.ml Traits/Comparable.signatures.Operators.ml Traits/Comparable.signatures.ml Traits/Ringoid.signatures.Basic.ml Traits/Ringoid.signatures.Operators.ml Traits/Ringoid.signatures.ml Traits/PredSucc.signatures.ml Traits/FilterMapable.signatures.ml Traits/FilterMapable.signatures.ToContainer.ml Traits/Foldable.signatures.Basic.ml Traits/Foldable.signatures.ml Traits/Foldable.signatures.Right.Basic.ml Traits/Foldable.signatures.Right.ml Traits/Foldable.signatures.Short.Basic.ml Traits/Foldable.signatures.Short.ml Traits/Foldable.signatures.Short.Right.Basic.ml Traits/Foldable.signatures.Short.Right.ml Traits/Scanable.signatures.ml Traits/Scanable.signatures.ToContainer.ml Traits/Scanable.signatures.Right.ml Traits/Scanable.signatures.Right.ToContainer.ml Traits/Scanable.signatures.Short.ml Traits/Scanable.signatures.Short.ToContainer.ml Traits/Scanable.signatures.Short.Right.ml Traits/Scanable.signatures.Short.Right.ToContainer.ml Concepts/Identifiable.signatures.ml Concepts/Able.signatures.Operators.ml Concepts/Able.signatures.ml Concepts/Number.signatures.Operators.ml Concepts/Number.signatures.ml Concepts/RealNumber.signatures.Operators.ml Concepts/RealNumber.signatures.ml Concepts/Integer.signatures.ml
    Traits/Comparable.signatures.Basic.ml Traits/Comparable.signatures.Operators.ml Traits/Comparable.signatures.ml Traits/Displayable.signatures.ml Traits/Equatable.signatures.Basic.ml Traits/Equatable.signatures.Operators.ml Traits/Equatable.signatures.ml Traits/FilterMapable.signatures.ml Traits/FilterMapable.signatures.ToContainer.ml Traits/Foldable.signatures.Basic.ml Traits/Foldable.signatures.ml Traits/Foldable.signatures.Right.Basic.ml Traits/Foldable.signatures.Right.ml Traits/Foldable.signatures.Short.Basic.ml Traits/Foldable.signatures.Short.ml Traits/Foldable.signatures.Short.Right.Basic.ml Traits/Foldable.signatures.Short.Right.ml Traits/Parsable.signatures.ml Traits/PredSucc.signatures.ml Traits/Representable.signatures.ml Traits/Ringoid.signatures.Basic.ml Traits/Ringoid.signatures.Operators.ml Traits/Ringoid.signatures.ml Traits/Scanable.signatures.ml Traits/Scanable.signatures.ToContainer.ml Traits/Scanable.signatures.Right.ml Traits/Scanable.signatures.Right.ToContainer.ml Traits/Scanable.signatures.Short.ml Traits/Scanable.signatures.Short.ToContainer.ml Traits/Scanable.signatures.Short.Right.ml Traits/Scanable.signatures.Short.Right.ToContainer.ml Concepts/Able.signatures.Operators.ml Concepts/Able.signatures.ml Concepts/Identifiable.signatures.ml Concepts/Integer.signatures.ml Concepts/Number.signatures.Operators.ml Concepts/Number.signatures.ml Concepts/RealNumber.signatures.Operators.ml Concepts/RealNumber.signatures.ml
  )
  (action (run %{bin:cppo} -V OCAML:%{ocaml_version} %{src} -o %{targets}))
)

(rule
  (targets General.ml)
  (deps (:src General.cppo.ml)
    Reset/CommonHeader.ml Reset/DefinitionHeader.ml Reset/ResetPervasives.ml Reset/ResetStandardLibrary.ml Reset/Footer.ml Equate.ml Compare.ml Shorten.ml Foundations/Format.ml Foundations/Lazy.ml Foundations/Exception.ml Foundations/Functions.ml Foundations/Int.ml Foundations/Bool.ml Foundations/Option.ml Foundations/List.ml Foundations/CallStack.ml Foundations/Float.ml Foundations/Reference.ml Foundations/String.ml Foundations/IntRange.ml Foundations/Tuples.ml Foundations/Exit.ml Foundations/Stream.ml Foundations/Unit.ml Foundations/PervasivesWhitelist.ml Testing.ml Traits/Representable.ml Traits/Equatable.ml Traits/Comparable.ml Traits/Displayable.ml Traits/Parsable.ml Traits/PredSucc.ml Traits/Ringoid.ml Traits/FilterMapable.ml Traits/Foldable.ml Traits/Scanable.ml Concepts/Identifiable.ml Concepts/Able.ml Concepts/Number.ml Concepts/RealNumber.ml Concepts/Integer.ml Implementation/Array.ml Implementation/Exception.ml Implementation/Format.ml Implementation/StandardInt.ml Implementation/Int32.ml Implementation/Int64.ml Implementation/Float.ml Implementation/BigInt.ml Implementation/Bool.ml Implementation/Bytes.ml Implementation/Int.ml Implementation/List.ml Implementation/CallStack.ml Implementation/Char.ml Implementation/Exit.ml Implementation/Functions.ml Implementation/InChannel.ml Implementation/InFile.ml Implementation/IntRange.ml Implementation/Lazy.ml Implementation/NativeInt.ml Implementation/Option.ml Implementation/OutChannel.ml Implementation/OutFile.ml Implementation/Tuples.ml Implementation/BinaryHeap.ml Implementation/PriorityQueue.ml Implementation/RedBlackTree.ml Implementation/Reference.ml Implementation/SortedMap.ml Implementation/SortedSet.ml Implementation/Heap.ml Implementation/StandardOutChannel.ml Implementation/StdErr.ml Implementation/StdIn.ml Implementation/StdOut.ml Implementation/Stream.ml Implementation/String.ml Implementation/TestingTests.ml Implementation/Unit.ml Specializations/List.ml Specializations/Option.ml Specializations/Reference.ml Specializations/SortedMap.ml Specializations/SortedSet.ml
    Traits/Comparable.signatures.Basic.ml Traits/Comparable.signatures.Operators.ml Traits/Comparable.signatures.ml Traits/Displayable.signatures.ml Traits/Equatable.signatures.Basic.ml Traits/Equatable.signatures.Operators.ml Traits/Equatable.signatures.ml Traits/FilterMapable.signatures.ml Traits/FilterMapable.signatures.ToContainer.ml Traits/Foldable.signatures.Basic.ml Traits/Foldable.signatures.ml Traits/Foldable.signatures.Right.Basic.ml Traits/Foldable.signatures.Right.ml Traits/Foldable.signatures.Short.Basic.ml Traits/Foldable.signatures.Short.ml Traits/Foldable.signatures.Short.Right.Basic.ml Traits/Foldable.signatures.Short.Right.ml Traits/Parsable.signatures.ml Traits/PredSucc.signatures.ml Traits/Representable.signatures.ml Traits/Ringoid.signatures.Basic.ml Traits/Ringoid.signatures.Operators.ml Traits/Ringoid.signatures.ml Traits/Scanable.signatures.ml Traits/Scanable.signatures.ToContainer.ml Traits/Scanable.signatures.Right.ml Traits/Scanable.signatures.Right.ToContainer.ml Traits/Scanable.signatures.Short.ml Traits/Scanable.signatures.Short.ToContainer.ml Traits/Scanable.signatures.Short.Right.ml Traits/Scanable.signatures.Short.Right.ToContainer.ml Concepts/Able.signatures.Operators.ml Concepts/Able.signatures.ml Concepts/Identifiable.signatures.ml Concepts/Integer.signatures.ml Concepts/Number.signatures.Operators.ml Concepts/Number.signatures.ml Concepts/RealNumber.signatures.Operators.ml Concepts/RealNumber.signatures.ml
  )
  (action (run %{bin:cppo} -V OCAML:%{ocaml_version} %{src} -o %{targets}))
)

(library
  (name General)
  (public_name General)
  (modules General)
  (libraries num)
  (flags (:standard -nopervasives -w @A-4-33-44-45-48))
)
