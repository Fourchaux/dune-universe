;; -*-lisp-*-

(jbuild_version 1)

;; This declares the utilsLib library
(library
 ((name utilsLib)
  (preprocess (per_module
	       ((action (system "${bin:camlp4} -parser o -parser op -printer a -loc loc ${lib:bolt:bolt_pp.cmo} -level NONE ${<}"))
		(utils sharedForest))
;;	       ((action (system "sed -e \"s/DATE/$(date '+%Y%m%d')/g\" -e \"s/VERSION/$(cat ../../acgtk.version)/g\" ${<}"))
;;	       	(version))
	       ))
  (flags (:standard -w -58))
  (modules (:standard \ test_sharedForest test_dependencyManager))
  (libraries (
	      bolt ; external libraries
	      str ; external libraries
	      ANSITerminal ; external libraries
	      ))))

(executables
 ((names (test_sharedForest test_dependencyManager))
  (libraries (threads
	      utilsLib))
  (modules (test_sharedForest test_dependencyManager))
  ))

(alias
 ((name testbuild)
  (deps (test_sharedForest.exe test_dependencyManager.exe))))

