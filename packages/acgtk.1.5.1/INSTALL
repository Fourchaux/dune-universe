**************************************************************************
*                                                                        *
*                 ACG development toolkit                                *
*                                                                        *
*                  Copyright 2008-2021 INRIA                             *
*                                                                        *
*  More information on "http://acg.gforge.inria.fr/"                     *
*  License: CeCILL, see the LICENSE file or "http://www.cecill.info"     *
*  Authors: see the AUTHORS file                                         *
*                                                                        *
*                                                                        *
*                                                                        *
*                                                                        *
*  $Rev::                              $:  Revision of last commit       *
*  $Author::                           $:  Author of last commit         *
*  $Date::                             $:  Date of last commit           *
*                                                                        *
**************************************************************************

*****************
* Prerequisites *
*****************

In order to compile the ACG toolkit, you need:
	+ ocaml (>=4.03) installed (http://caml.inria.fr/)
	+ dune installed (https://github.com/ocaml/dune)
	+ menhir installed (http://gallium.inria.fr/~fpottier/menhir/)
        + ANSITerminal (>=0.6.5) installed (https://forge.ocamlcore.org/projects/ansiterminal/)
	+ fmt installed (http://erratique.ch/software/fmt)
	+ cmdliner installed (http://erratique.ch/software/https://erratique.ch/software/cmdliner)
	+ logs installed (http://erratique.ch/software/logs)
        + cairo2 (>=0.4.6) installed (http://forge.ocamlcore.org/projects/cairo/)
	+ easy-format installed (http://mjambon.com/releases/easy-format/easy-format-1.0.2.tar.gz). Required by biniou
	+ biniou (>=1.0.6) installed (http://mjambon.com/biniou.html). Required by yojson
	+ yojson (>=1.1.8) installed (http://mjambon.com/yojson.html).

For best results (correct rendering of symbols in the graphical output),
please also install the free DejaVu fonts (http://dejavu-fonts.org).


=======
IMPORTANT:

A fast an easy way to install all important ocaml libraries is
to use "opam" (http://opam.ocaml.org/).

The installation typically goes that way:
    + first install OCaml using your prefered distribution/packaging mode
    + then install opam
    + don't forget to add the required library in your path
      running ``eval `opam config env` ``
      (see http://opam.ocaml.org/doc/Usage.html#opam-switch)
    + then run
      	   opam install acgtk
      and all the required dependencies should be automatically installed,
      and acg and acgc as well!

This will install in the `.opam/OCAML_VERSION/bin` directory (where
`OCAML_VERSION` is the OCaml version that you are using with opam. It
can be `system` in case you are not using a compiler installed by
opam, or a version number (such as 4.05.0) otherwise) the binaries
`acgc` and `acg`.


It will also install in the `.opam/OCAML_VERSION/share/acgtk` directory:
1. the emacs directory 
2. the examples directory

(Skip the following part if you installed acgtk as described above)
Alternatively, if you want to compile acgtk by yourself
     + first install the required libraries with the command
      	   opam install dune menhir ANSITerminal fmt logs cairo2 easy-format bibiou yojson ocf
     + download the ACGtk sources from http://acg.loria.fr/

To build the ACG toolkit, first run:

	dune build

then

	dune install



********************
** ACG emacs mode **
********************

There is an ACG emacs mode (acg.el) in the emacs directory.

** Quick way to have it work:

copy the following lines in your .emacs

(setq load-path (cons "EMACS_DIR_PATH" load-path))
(setq auto-mode-alist (cons '("\\.acg" . acg-mode) auto-mode-alist))
(autoload 'acg-mode "acg" "Major mode for editing ACG definitions" t)

** if you run 

      make install-emacs

the emacs directory and the emacs/acg.el file will be copied in the
/DATAROOTDIR/acgtk directory. The default value for /DATAROOTDIR is
/PREFIX/share except if you ran the ./configure script with some
--datarootdir=/SOME/DIR option.

If you installed acgtk using opam, then the default path is

	OPAM_REPOSITORY/OCAML_VERSION/share/acgtk

To uninstall the emacs mode, run:

      make uninstall-emacs

** Site distribution:
   
copy acg.el under an acg directory in your site-lisp directory
(typically /usr/share/emacs/site-lisp/)

create a 50acg.el file into the /etc/emacs/site-start.d directory and
copy the following lines in it:

(setq load-path (cons "EMACS_DIR_PATH" load-path))
(setq auto-mode-alist (cons '("\\.acg" . acg-mode) auto-mode-alist))
(autoload 'acg-mode "acg" "Major mode for editing ACG definitions" t)

where now EMACS_DIR_PATH is the acg directory in your site-lisp
directory (typically /usr/share/emacs/site-lisp/acg)

************
* Examples *
************

Example files are given in the ./examples directory. Read the
./examples/README file

You can install this directory by running

      make install-examples

the examples directoryfile will be copied in the /DATAROOTDIR/acgtk
directory. The default value for /DATAROOTDIR is /PREFIX/share except
if you ran the ./configure script with some --datarootdir=/SOME/DIR
option.

If you installed acgtk using opam, then the default path is

	OPAM_REPOSITORY/OCAML_VERSION/share/acgtk


