(jbuild_version 1)

; Copy autogenerated files
(rule (copy ../spec/amqp_spec.ml amqp_spec.ml))
(rule (copy ../spec/amqp_constants.ml amqp_constants.ml))

; Copy sources from lib
(rule (copy# ../lib/amqp_channel.ml amqp_channel.ml))
(rule (copy# ../lib/amqp_connection.ml amqp_connection.ml))
(rule (copy# ../lib/amqp_exchange.ml amqp_exchange.ml))
(rule (copy# ../lib/amqp_framing.ml amqp_framing.ml))
(rule (copy# ../lib/amqp_io.ml amqp_io.ml))
(rule (copy# ../lib/amqp_lib.ml amqp_lib.ml))
(rule (copy# ../lib/amqp_message.ml amqp_message.ml))
(rule (copy# ../lib/amqp.ml amqp.ml))
(rule (copy# ../lib/amqp_protocol_helpers.ml amqp_protocol_helpers.ml))
(rule (copy# ../lib/amqp_protocol.ml amqp_protocol.ml))
(rule (copy# ../lib/amqp_queue.ml amqp_queue.ml))
(rule (copy# ../lib/amqp_rpc.ml amqp_rpc.ml))
(rule (copy# ../lib/amqp_types.ml amqp_types.ml))

(rule (copy# ../lib/amqp_channel.mli amqp_channel.mli))
(rule (copy# ../lib/amqp_connection.mli amqp_connection.mli))
(rule (copy# ../lib/amqp_exchange.mli amqp_exchange.mli))
(rule (copy# ../lib/amqp_framing.mli amqp_framing.mli))
(rule (copy# ../lib/amqp_message.mli amqp_message.mli))
(rule (copy# ../lib/amqp_queue.mli amqp_queue.mli))
(rule (copy# ../lib/amqp_rpc.mli amqp_rpc.mli))


(library
 ((name amqp_client.lwt)
  (public_name amqp-client.lwt)
  (synopsis "lwt version")
  (libraries (ocplib-endian lwt lwt.log lwt.unix))
  (wrapped false)
  (optional)
 )
)
