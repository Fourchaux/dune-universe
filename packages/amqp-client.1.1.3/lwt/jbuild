(jbuild_version 1)

; Copy autogenerated files
(rule (copy ../spec/spec.ml spec.ml))
(rule (copy ../spec/constants.ml constants.ml))

; Copy sources from async
(rule (copy# ../async/channel.ml channel.ml))
(rule (copy# ../async/connection.ml connection.ml))
(rule (copy# ../async/exchange.ml exchange.ml))
(rule (copy# ../async/framing.ml framing.ml))
(rule (copy# ../async/io.ml io.ml))
(rule (copy# ../async/message.ml message.ml))
(rule (copy# ../async/protocol_helpers.ml protocol_helpers.ml))
(rule (copy# ../async/protocol.ml protocol.ml))
(rule (copy# ../async/queue.ml queue.ml))
(rule (copy# ../async/rpc.ml rpc.ml))
(rule (copy# ../async/types.ml types.ml))

(rule (copy# ../async/channel.mli channel.mli))
(rule (copy# ../async/connection.mli connection.mli))
(rule (copy# ../async/exchange.mli exchange.mli))
(rule (copy# ../async/framing.mli framing.mli))
(rule (copy# ../async/message.mli message.mli))
(rule (copy# ../async/queue.mli queue.mli))
(rule (copy# ../async/rpc.mli rpc.mli))

(library
 ((name Amqp)
  (public_name amqp-client.lwt)
  (synopsis "lwt version")
  (libraries (ocplib-endian lwt lwt.log lwt.unix lib))
  (optional)
 )
)
