module Afunction
  use int.Int

  type storage

  val function exec storage : int

end

theory Test
  use int.Int
  use ref.Ref
  use Afunction
  
  type storage = {
       mutable a : int;
  }
   
  clone Afunction as Af with type storage = storage
  
  let update (s : ref storage) = 
  s := { !s with a = Af.exec (!s) }

end
