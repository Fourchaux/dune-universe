<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Page (mechaml.Mechaml.Page)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../index.html">mechaml</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Mechaml.Page</span></h1></header><p>Page</p><p>This module contains all the functions used to analyze a page, select specific
elements, and manage forms.</p><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"><p>The type of an html page</p></div></div><div class="spec val" id="val-from_soup"><a href="#val-from_soup" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>from_soup : ?&#8288;location:Uri.t <span class="keyword">&#8209;&gt;</span> Soup.soup Soup.node <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Make a new page from a base URI and a Lambdasoup document</p></div></div><div class="spec val" id="val-from_string"><a href="#val-from_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>from_string : ?&#8288;location:Uri.t <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Make a new page from a base URI and a HTML string</p></div></div><div class="spec val" id="val-base_uri"><a href="#val-base_uri" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>base_uri : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Uri.t</code></div><div class="doc"><p>Return the location of a page (or <code class="code">Uri.empty</code> if not specified)</p></div></div><div class="spec val" id="val-resolver"><a href="#val-resolver" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>resolver : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Uri.t <span class="keyword">&#8209;&gt;</span> Uri.t</code></div><div class="doc"><p>Return the resolver of page, that take relative URIs to absolute ones using
the page base URI</p></div></div><div class="spec val" id="val-soup"><a href="#val-soup" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>soup : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Soup.soup Soup.node</code></div><div class="doc"><p>Convert to Lambdasoup</p></div></div><h3>Lazy sequences</h3><p>
Lambdasoup provides lazy sequences to traverse only needed part of an HTML
document when used in combination with <code class="code">with_stop</code>. We provide a wrapper
that is compatible with Mechaml types such as forms, images, inputs, etc.</p><div class="spec type" id="type-seq"><a href="#type-seq" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>+'a seq</code><code></code><code></code></div><div class="doc"><p>Lazy sequences of HTML elements. See <code class="code">Soup.nodes</code> type</p></div></div><div class="spec type" id="type-stop"><a href="#type-stop" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a stop</code><code><span class="keyword"> = </span><span class="type-var">'a</span> Soup.stop</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-stop.throw" class="anchored"><td class="def field"><a href="#type-stop.throw" class="anchor"></a><code>throw : b. <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span>;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p><code class="code">Soup.stop</code> type</p></div></div><p>Operations on lazy sequences</p><div class="spec val" id="val-iter"><a href="#val-iter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>iter : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-seq">seq</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"></div></div><div class="spec val" id="val-fold"><a href="#val-fold" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>fold : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'b</span> <a href="index.html#type-seq">seq</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"></div></div><div class="spec val" id="val-filter"><a href="#val-filter" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>filter : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-seq">seq</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-seq">seq</a></code></div><div class="doc"></div></div><div class="spec val" id="val-first"><a href="#val-first" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>first : <span class="type-var">'a</span> <a href="index.html#type-seq">seq</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option</code></div><div class="doc"></div></div><div class="spec val" id="val-nth"><a href="#val-nth" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nth : int <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-seq">seq</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option</code></div><div class="doc"></div></div><div class="spec val" id="val-find_first"><a href="#val-find_first" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>find_first : (<span class="type-var">'a</span> <span class="keyword">&#8209;&gt;</span> bool) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> <a href="index.html#type-seq">seq</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> option</code></div><div class="doc"></div></div><div class="spec val" id="val-to_list"><a href="#val-to_list" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_list : <span class="type-var">'a</span> <a href="index.html#type-seq">seq</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> list</code></div><div class="doc"></div></div><div class="spec val" id="val-with_stop"><a href="#val-with_stop" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>with_stop : (<span class="type-var">'a</span> <a href="index.html#type-stop">stop</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span></code></div><div class="doc"><p>see Lambdasoup's <code class="code">Soup.with_stop</code></p></div></div><h4>Form</h4><div class="spec module" id="module-Form"><a href="#module-Form" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Form/index.html">Form</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Operations on forms and inputs</p></div></div><h5>Images and links</h5><div class="spec module" id="module-Link"><a href="#module-Link" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Link/index.html">Link</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Operations on hypertext links</p></div></div><div class="spec module" id="module-Image"><a href="#module-Image" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Image/index.html">Image</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Operations on images</p></div></div><h6>Nodes selection</h6><p>All the following function are built using the same pattern.</p><ul><li>xxxs (eg <a href="index.html#val-forms">forms</a>) return all the elements of a certain type as a lazy
sequence.
For example, <code class="code">forms mypage</code> will return all the forms in the page</li><li>xxx_with take a CSS selector as parameter, and return the first element that
matches the selector, or <code class="code">None</code> if there isn't any. Eg, <code class="code">link_with
    &quot;[href$=.jpg]&quot; mypage</code> will try to find a link that point to a JPEG image</li><li>xxxs_with proceed as the previous one, but return a lazy sequence of all elements matching the
selector.</li></ul><div class="spec val" id="val-form_with"><a href="#val-form_with" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>form_with : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Form/index.html#type-t">Form.t</a> option</code></div><div class="doc"></div></div><div class="spec val" id="val-forms_with"><a href="#val-forms_with" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>forms_with : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Form/index.html#type-t">Form.t</a> <a href="index.html#type-seq">seq</a></code></div><div class="doc"></div></div><div class="spec val" id="val-forms"><a href="#val-forms" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>forms : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Form/index.html#type-t">Form.t</a> <a href="index.html#type-seq">seq</a></code></div><div class="doc"></div></div><div class="spec val" id="val-link_with"><a href="#val-link_with" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>link_with : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Link/index.html#type-t">Link.t</a> option</code></div><div class="doc"></div></div><div class="spec val" id="val-links_with"><a href="#val-links_with" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>links_with : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Link/index.html#type-t">Link.t</a> <a href="index.html#type-seq">seq</a></code></div><div class="doc"></div></div><div class="spec val" id="val-links"><a href="#val-links" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>links : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Link/index.html#type-t">Link.t</a> <a href="index.html#type-seq">seq</a></code></div><div class="doc"></div></div><div class="spec val" id="val-image_with"><a href="#val-image_with" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>image_with : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Image/index.html#type-t">Image.t</a> option</code></div><div class="doc"></div></div><div class="spec val" id="val-images_with"><a href="#val-images_with" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>images_with : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Image/index.html#type-t">Image.t</a> <a href="index.html#type-seq">seq</a></code></div><div class="doc"></div></div><div class="spec val" id="val-images"><a href="#val-images" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>images : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="Image/index.html#type-t">Image.t</a> <a href="index.html#type-seq">seq</a></code></div><div class="doc"></div></div></body></html>