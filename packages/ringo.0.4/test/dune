(executables
 (names
  test_collection
  test_tabler
  test_cache_set
  test_cache_map
  test_weakness_map
  test_weakness_set)
 (libraries ringo)
 (flags :standard))

(alias
 (name runtest_collection)
 (action (setenv OCAMLRUNPARAM "b" (run %{exe:test_collection.exe}))))

(alias
 (name runtest_tabler)
 (action (setenv OCAMLRUNPARAM "b" (run %{exe:test_tabler.exe}))))

(alias
 (name runtest_cache_set)
 (action (setenv OCAMLRUNPARAM "b" (run %{exe:test_cache_set.exe}))))

(alias
 (name runtest_cache_map)
 (action (setenv OCAMLRUNPARAM "b" (run %{exe:test_cache_map.exe}))))

(alias
 (name runtest_weakness_map)
 (action
  (setenv OCAMLRUNPARAM "o=20,h=16,s=16,i=2"
   (run %{exe:test_weakness_map.exe}))))

(alias
 (name runtest_weakness_set)
 (action
  (setenv OCAMLRUNPARAM "o=20,h=16,s=16,i=2"
   (run %{exe:test_weakness_set.exe}))))

(alias
 (name runtest)
 (deps
  (alias runtest_collection)
  (alias runtest_tabler)
  (alias runtest_cache_set)
  (alias runtest_cache_map)))

(alias
  (name runleaktest)
  (deps
    (alias runtest_weakness_map)
    (alias runtest_weakness_set)))
